<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PostgreSQL Server 自救手冊 | 《專案文件舘》</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="彙集專案相關文件">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/Django4-Project-Template/assets/css/0.styles.61339c89.css" as="style"><link rel="preload" href="/Django4-Project-Template/assets/js/app.85744e83.js" as="script"><link rel="preload" href="/Django4-Project-Template/assets/js/2.c06a707d.js" as="script"><link rel="preload" href="/Django4-Project-Template/assets/js/200.11208b28.js" as="script"><link rel="prefetch" href="/Django4-Project-Template/assets/js/10.5691f3a9.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/100.90a68d78.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/101.360c8a2f.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/102.36bb47bb.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/103.d1ba6b6e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/104.ca8756b0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/105.bb44451a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/106.79d9ae76.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/107.1e503b0f.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/108.b25055d6.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/109.97826a20.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/11.c9957984.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/110.db13e115.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/111.97dd95f0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/112.2356b060.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/113.ac91f33a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/114.7fcced81.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/115.c4f155c8.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/116.9fa2f994.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/117.06c8327e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/118.f1f509c9.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/119.44573aa4.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/12.f2698b52.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/120.9e3a8e4a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/121.289a8fa4.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/122.125ae6d7.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/123.383957db.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/124.29eeaa27.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/125.634ea15e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/126.5f981fa6.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/127.0f09b16b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/128.7d8a4d9a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/129.a0b49d00.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/13.9183137b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/130.002c040f.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/131.141ba121.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/132.29f09a8f.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/133.af0ab2c6.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/134.4ceafcb1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/135.a068a819.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/136.b14ff692.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/137.6ac48650.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/138.4bad394c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/139.b9f365da.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/14.cd75f347.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/140.5045f9fe.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/141.c706ae9a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/142.cac4f43c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/143.f9002cab.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/144.0c32198b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/145.cb0cb0b8.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/146.a03fc4b5.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/147.61e8e992.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/148.804c6789.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/149.36d21911.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/15.a39394c3.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/150.303e3675.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/151.c4326470.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/152.c64268eb.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/153.42722b30.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/154.bceead00.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/155.9b134554.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/156.a94162b0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/157.ae3573b5.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/158.b24de0cd.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/159.f04cd068.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/16.9da12a08.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/160.a1f1177d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/161.7fd424bf.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/162.af12ef29.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/163.385bc4cd.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/164.9d186eb4.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/165.94f26bb2.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/166.81ab1171.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/167.b40a9186.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/168.bac35a7d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/169.c508ce6b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/17.ce305e5a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/170.e1ac4979.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/171.4d648b60.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/172.dc5f8c22.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/173.a4e5f963.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/174.7fb4eaab.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/175.e63effd6.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/176.d21920b6.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/177.bbb2769f.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/178.eff1705d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/179.0c6ae38b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/18.b46b18ca.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/180.5d0ac9c3.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/181.3a235f4f.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/182.78e47913.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/183.8d9dbc6e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/184.ec43d72e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/185.12e07699.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/186.979d94df.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/187.a4cb4b45.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/188.3cbcf071.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/189.f26e2804.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/19.da5434b3.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/190.49db0e53.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/191.6b065322.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/192.d9a8e122.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/193.f7dd8204.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/194.ca87dc6a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/195.4026f0d1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/196.f9a0a5bb.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/197.b18ae4b8.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/198.698ceb55.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/199.b5c710e7.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/20.468eb836.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/201.88b5fc5a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/202.e3e2c818.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/203.98117947.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/204.ab9c9f8d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/205.12585880.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/206.84f7159b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/207.d8e5917a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/208.de8779f0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/209.8675d701.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/21.8ca83c99.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/210.c1e73d71.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/211.b62309e5.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/212.2a9479fa.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/213.87009306.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/214.d10ac19e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/215.b6392483.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/216.b03c57b8.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/217.80498e7b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/218.880e1882.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/219.f5c0eba1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/22.d1799073.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/220.f63e0dc0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/221.6a194125.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/222.b02b43a1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/223.9d1f926d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/224.68f4f8c1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/225.1b370f31.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/226.5aeab5ef.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/227.e6d038fa.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/228.9df23b8e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/229.6f2b9ac2.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/23.2ccc740d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/230.deb441a6.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/231.8a705474.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/232.7671854c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/233.dca06f36.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/234.68459d49.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/235.10211cb7.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/236.f0c5c454.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/237.e082dca5.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/238.1877b6cb.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/239.81368ecf.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/24.28d0fabf.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/240.4568ba76.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/241.682e5125.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/242.a12343d0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/243.de07e131.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/244.8bc96641.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/245.f89663b9.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/246.bd19c1fd.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/247.358c89cd.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/248.f60713cd.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/249.1b193473.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/25.2a3adaf0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/250.4c252b00.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/251.42d7f618.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/252.3c806581.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/253.d80d6188.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/254.b2f81131.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/255.e2c4e69f.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/256.c69afff6.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/257.3cbb31c7.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/258.5171d83a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/259.8ba4bed7.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/26.dc91b7f1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/260.4673c31b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/261.c9e285a1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/262.53bf93ff.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/263.aba5408d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/264.138e998d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/265.1aa3d96e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/266.2a0d3bbf.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/267.5b3da12d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/268.16309f96.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/269.b3b4b3e5.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/27.ef7c877f.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/270.33f8e11b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/271.20bb3554.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/272.f8e4e3cc.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/273.a8fb79bd.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/274.8cffbf46.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/275.36baa41c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/276.b066be42.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/277.5f455a2a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/278.8eb4690e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/279.edc03317.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/28.a3a59f5c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/280.a9f1222c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/281.c8b74bb0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/282.2e438fd4.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/283.aa42a9e1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/284.4db32622.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/285.995ab829.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/286.9af42296.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/287.d5baf962.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/288.9dc17dd7.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/289.39ba33e9.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/29.54b38b5c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/290.9d0408fe.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/291.2b93a0fa.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/292.9933e60d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/293.9818cfa8.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/294.19682b99.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/295.5d5b16f5.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/296.2cc6e818.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/297.9db9d22b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/298.49a5646c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/299.c5393e3e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/3.84478ca7.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/30.8c196357.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/300.7819e1ff.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/301.7b4ab8db.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/31.2eddc5f8.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/32.e044508d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/33.f55803ad.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/34.47d65a8c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/35.d5a2486d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/36.cf6c774e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/37.f1ea0c9c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/38.96b16560.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/39.bfc5a8b0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/4.65cb635a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/40.a86ffc2b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/41.4fc59a93.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/42.83b3fca0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/43.4539d518.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/44.a46b34bc.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/45.1bf4d919.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/46.9ddfe64a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/47.2ef1c49b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/48.954bb735.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/49.fbe30a7d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/5.3f65dc24.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/50.647fc27f.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/51.342b017e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/52.dc638d66.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/53.a7755902.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/54.c8dabbcc.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/55.f0d00c3e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/56.b80a8eac.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/57.af95c5a1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/58.b4c273a9.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/59.245c8db1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/6.98bb6adc.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/60.f3929800.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/61.33048821.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/62.2797510b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/63.c6b684a1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/64.2238531e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/65.c1ce3b29.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/66.a3816f43.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/67.25003ffd.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/68.d1e70a31.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/69.91e3e0b3.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/7.d84d1ad0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/70.79380f13.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/71.76792141.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/72.1963b645.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/73.18cf47cc.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/74.227fbb9c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/75.496f4453.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/76.522392c3.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/77.3110c92f.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/78.ad9ce75a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/79.c0b23700.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/8.b237f028.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/80.e1876902.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/81.e3776492.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/82.89780882.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/83.63d2f2fa.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/84.2c5e7730.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/85.4abef243.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/86.fac01eb7.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/87.287b1e6d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/88.860d47f8.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/89.876679d1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/9.905004ab.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/90.660f1b21.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/91.51871172.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/92.3530d643.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/93.fc37ba4c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/94.bda706b2.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/95.bb34c42c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/96.c3587b2b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/97.9a4e2663.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/98.794f94e6.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/99.ccc3d771.js">
    <link rel="stylesheet" href="/Django4-Project-Template/assets/css/0.styles.61339c89.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Django4-Project-Template/" class="home-link router-link-active"><!----> <span class="site-name">《專案文件舘》</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Django4-Project-Template/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/Django4-Project-Template/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Django4-Project-Template/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/Django4-Project-Template/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>作業指引</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Django4-Project-Template/d100_URS/" class="sidebar-link">使用者需求</a></li><li><a href="/Django4-Project-Template/d200_SRS/" class="sidebar-link">系統需求</a></li><li><a href="/Django4-Project-Template/d300_SDD/" class="sidebar-link">系統設計</a></li><li><a href="/Django4-Project-Template/d400_DEV/" class="sidebar-link">開發與測試</a></li><li><a href="/Django4-Project-Template/d500_OP/" class="sidebar-link">系統維運</a></li><li><a href="/Django4-Project-Template/d900_REF/" class="sidebar-link">其它⋯⋯</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>電腦硬體</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>開發環境</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>常用工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>參考資料</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="postgresql-server-自救手冊"><a href="#postgresql-server-自救手冊" class="header-anchor">#</a> PostgreSQL Server 自救手冊</h1> <hr> <h1 id="完成安裝後"><a href="#完成安裝後" class="header-anchor">#</a> 完成安裝後</h1> <h2 id="變更預設管理員帳號-postgres-的密碼"><a href="#變更預設管理員帳號-postgres-的密碼" class="header-anchor">#</a> 變更預設管理員帳號 postgres 的密碼</h2> <div class="language- extra-class"><pre><code>psql postgres
\du
\password postgres
</code></pre></div><h2 id="建立app用資料庫"><a href="#建立app用資料庫" class="header-anchor">#</a> 建立App用資料庫</h2> <p>查詢使用者帳號：查詢 Postgres Server 所擁有的使用者帳號</p> <div class="language- extra-class"><pre><code>\du
</code></pre></div><p>建立使用者帳號（db_user)</p> <div class="language- extra-class"><pre><code>create role db_user with login password 'Passw0rd';
</code></pre></div><p>允許 db_user 帳號，具建立DB權限</p> <div class="language- extra-class"><pre><code>alter role db_user createdb;
</code></pre></div><p>透過「查詢使用者帳號指令」，確認使用者帳號已建立。</p> <div class="language- extra-class"><pre><code>\du
\q
</code></pre></div><p>以 db_user 帳號，進入 psql</p> <div class="language- extra-class"><pre><code>psql postgres -U db_user\
</code></pre></div><p>建立資料庫</p> <div class="language- extra-class"><pre><code>create database my_test_db;
</code></pre></div><p>確認資料庫已建立</p> <div class="language- extra-class"><pre><code>\l
</code></pre></div><p>設定 db_user 在 my_test_db 資料庫擁有所有權限</p> <div class="language- extra-class"><pre><code>grant all privileges on database my_test_db to db_user;
</code></pre></div><p>確認 db_user 已能連上 my_test_db 資料庫</p> <div class="language- extra-class"><pre><code>\connect my_test_db;
</code></pre></div><p>查詢資料已建立之 Tables</p> <div class="language- extra-class"><pre><code>\dt
</code></pre></div><p>離開 psql</p> <div class="language- extra-class"><pre><code>\q
</code></pre></div><hr> <h1 id="在-docker-container-環境運作"><a href="#在-docker-container-環境運作" class="header-anchor">#</a> 在 Docker Container 環境運作</h1> <p>https://hub.docker.com/_/postgres/</p> <h1 id="下載postgresql"><a href="#下載postgresql" class="header-anchor">#</a> 下載PostgreSQL</h1> <div class="language- extra-class"><pre><code>docker pull postgres
</code></pre></div><h1 id="啟動-postgresql-instance"><a href="#啟動-postgresql-instance" class="header-anchor">#</a> 啟動 PostgreSQL Instance</h1> <h2 id="start-a-postgres-instance"><a href="#start-a-postgres-instance" class="header-anchor">#</a> start a postgres instance</h2> <div class="language- extra-class"><pre><code>docker run --name some-postgres -e POSTGRES_PASSWORD=mysecretpassword -d postgres



docker run --name psql-db -e POSTGRES_PASSWORD=Passw0rd -d postgres


docker run --name psql-db -e POSTGRES_PASSWORD=Passw0rd -p 5432:5432 postgres:10
</code></pre></div><h2 id="connect-to-it-from-an-application"><a href="#connect-to-it-from-an-application" class="header-anchor">#</a> connect to it from an application</h2> <div class="language- extra-class"><pre><code>$ docker run --name some-app --link some-postgres:postgres -d application-that-uses-postgres


docker run --name psql-db --link db:postgres -d psql -h postgres -U postgres


docker run --link db:postgres -d --name psql-db -e POSTGRES_PASSWORD=Passw0rd -p 5432:5432 postgres:10
</code></pre></div><p>驗證 Container 已能正常運作</p> <div class="language- extra-class"><pre><code>docker ps


AlanJui at MacBook-Pro.local in [~/workspace/django]
21:59:30 $ docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED                  STATUS              PORTS                    NAMES
5c5bf208b44a        postgres:10         &quot;docker-entrypoint.s…&quot;   Less than a second ago   Up 3 seconds        0.0.0.0:5432-&gt;5432/tcp   psql-db
</code></pre></div><p>執行 PSQL</p> <div class="language- extra-class"><pre><code>docker run -it --rm --link some-postgres:postgres postgres psql -h postgres -U postgres


AlanJui at MacBook-Pro.local in [~/workspace/django]
22:04:42 $ docker exec -it psql-db bash
root@5c5bf208b44a:/# psql -h localhost -U postgres
psql (10.4 (Debian 10.4-2.pgdg90+1))
Type &quot;help&quot; for help.

postgres=# \q
root@5c5bf208b44a:/# exit
exit

AlanJui at MacBook-Pro.local in [~/workspace/django]
22:16:04 $
</code></pre></div><hr> <div class="language- extra-class"><pre><code>docker stack deploy -c stack.yml postgres


docker-compose -f stack.yml up


http://&lt;swarm-ip&gt;:8080


http://localhost:8080


http://&lt;host-ip&gt;:8080
</code></pre></div><p>stack.yml</p> <div class="language- extra-class"><pre><code># Use postgres/example user/password credentials
version: '3.1'

services:

  db:
    image: postgres
    restart: always
    environment:
      POSTGRES_PASSWORD: Passw0rd

  adminer:
    image: adminer
    restart: always
    ports:
      - 8080:8080
</code></pre></div><hr> <h1 id="在-ubuntu-16-04-環境運作"><a href="#在-ubuntu-16-04-環境運作" class="header-anchor">#</a> 在 Ubuntu 16.04 環境運作</h1> <p>安裝指令。</p> <div class="language- extra-class"><pre><code>sudo apt-get update
sudo apt-get install postgresql postgresql-contrib


Creating new cluster 9.5/main ...
  config /etc/postgresql/9.5/main
  data   /var/lib/postgresql/9.5/main
  locale en_US.UTF-8
  socket /var/run/postgresql
  port   5432
</code></pre></div><p>系統安裝路徑：</p> <div class="language- extra-class"><pre><code>/usr/share/postgresql/9.5/
/usr/share/postgresql-common/
</code></pre></div><p>設定檔存放路徑：</p> <div class="language- extra-class"><pre><code>/etc/postgresql/9.5/main/postgresql.conf
</code></pre></div><p>資料庫存放路徑：</p> <div class="language- extra-class"><pre><code>/var/lib/postgresql/9.5/main
</code></pre></div><p>Service 管理常用指令：</p> <div class="language- extra-class"><pre><code>sudo service postgresql status (systemctl status postgresql)
sudo service postgresql stop (sudo systemctl stop postgresql)
sudo service postgresql start (sudo systemctl start postgresql) 
sudo service postgresql restart (sudo systemctl restart postgresql) 
</code></pre></div><hr> <h2 id="變更-port-號作業"><a href="#變更-port-號作業" class="header-anchor">#</a> 變更 Port 號作業</h2> <p>設定檔： /etc/postgresql/<Ver>/main/postgresql.conf</Ver></p> <div class="language- extra-class"><pre><code>...
port = 5433
</code></pre></div><hr> <h2 id="變更預設管理員帳號密碼作業"><a href="#變更預設管理員帳號密碼作業" class="header-anchor">#</a> 變更預設管理員帳號密碼作業</h2> <p>將 PostgreSQL 資料庫系統，預設的管理員帳號：postgres，設定密碼。</p> <p><strong>驗證作業系統已有 postgres 使用者帳號被建立。</strong></p> <div class="language- extra-class"><pre><code>$ id postgres
uid=124(postgres) gid=131(postgres) \u7fa4\u7d44=131(postgres),112(ssl-cert)
</code></pre></div><p>變更「使用作業系統使用者」的密碼</p> <div class="language- extra-class"><pre><code>$ sudo passwd postgres
</code></pre></div><p>變更「PostgreSQL資料庫系統使用者（postgres）」的密碼</p> <div class="language- extra-class"><pre><code>$ sudo -u postgres psql -d template1 -c &quot;ALTER USER postgres WITH PASSWORD 'ChingHai99@';&quot;
</code></pre></div><hr> <h2 id="設定可遠端存取作業"><a href="#設定可遠端存取作業" class="header-anchor">#</a> 設定可遠端存取作業</h2> <p><strong>(1)　設定 PostgreSQL 相關「設定檔」：</strong></p> <p>設定檔目錄路徑：/etc/postgresql/9.5/main/</p> <p>在檔案： <strong>pg_hba.conf ，加入下列設定：</strong></p> <div class="language- extra-class"><pre><code>host all all 192.168.66.0/24 md5
</code></pre></div><p>在檔案： <strong>postgresql.conf，加入下列設定：</strong></p> <div class="language- extra-class"><pre><code>listen_addresses='*'
</code></pre></div><p><strong>(2) 開通防火牆</strong></p> <p>要求「防火牆」開放 PORT: 5432
檢查防火牆的 Port：5432 是否已開通： <a href="http://www.yougetsignal.com/tools/open-ports/" target="_blank" rel="noopener noreferrer">http://www.yougetsignal.com/tools/open-ports/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>執行下列指令，要求防火牆將 Port: 5432 開通（意即在 <code>iptables</code> 新增 rule）</p> <div class="language- extra-class"><pre><code>iptables -A INPUT -s 0/0 -p tcp --dport 5432 -j ACCEPT
</code></pre></div><p><strong>(3) 從新啟動 PostgreSQL Service</strong></p> <p>在Server端，將 PostgreSQL Service 重新啟動：</p> <div class="language- extra-class"><pre><code>sudo service postgresql restart
sudo service postgresql status
</code></pre></div><p><strong>(4) 驗證可自遠端連入</strong></p> <p>在 Client 端，連入 PostgreSQL Server：</p> <div class="language- extra-class"><pre><code> psql -U postgres postgres -h 192.168.66.10
 ...
 \q
</code></pre></div><hr> <p><strong>以 postgres 使用者身份啟動 postgres 管理工具：psql</strong></p> <p>直接使用目前使用者：</p> <div class="language- extra-class"><pre><code>$ sudo -u postgres psql
</code></pre></div><p>先切換到 postgres 使用者：</p> <div class="language- extra-class"><pre><code>$ sudo -i -u postgres
$ psql
</code></pre></div><p>退出 psql</p> <div class="language- extra-class"><pre><code>postgres=# \q
</code></pre></div><hr> <p><strong>建立資料庫使用者（Create a New Role）</strong></p> <p>使用指令： createuser 。對於指令用法，需要說明時，可用以下方式查明：</p> <div class="language- extra-class"><pre><code>$ man createuser
</code></pre></div><p>【方法一】：使用登入系統的使用者身份</p> <div class="language- extra-class"><pre><code>$ sudo -u postgres createuser --interactive
Enter name of role to add: app_user
Shall the new role be a superuser? (y/n) y
</code></pre></div><p>【方法二】：切換成 postgres 使用者身份</p> <div class="language- extra-class"><pre><code>$ sudo -i -u postgres
postgres@srv-01:~$ createuser --interactive
</code></pre></div><p>【方法三】：切換成作業系統使用者 postgres 身份</p> <div class="language- extra-class"><pre><code>$ su - postgres
密碼： 
postgres@srv-01:~$

postgres@srv-01:~$ createdb mytestdb
postgres@srv-01:~$ psql mytestdb
psql (9.5.12)
Type &quot;help&quot; for help.

mytestdb=# \q
postgres@srv-01:~$ 

postgres@srv-01:~$ su alanjui
Password: 
alanjui@srv-01:/var/lib/postgresql$ 
</code></pre></div><hr> <p>刪除 PostgreSQL 資料庫庫管理系統中的使用者： dropuser</p> <div class="language- extra-class"><pre><code>$ su - postgres
密碼： 
postgres@srv-01:~$ dropuser app_user
postgres@srv-01:~$ 
</code></pre></div><hr> <p>建立資料庫（Create a New Database）</p> <div class="language- extra-class"><pre><code>sudo -u postgres createdb my_project



$ sudo adduser app_db

$ sudo -u postgres createuser --interactive
Enter name of role to add: app_db
Shall the new role be a superuser? (y/n) y

$ sudo -u app_db createdb app_db
</code></pre></div><hr> <p>應用案例：建立一個資料庫： app_db ，其資料管理員帳號為： app_user (密碼：changeme)</p> <div class="language- extra-class"><pre><code>$ su - postgres
密碼： 
postgres@srv-01:~$

postgres@srv-01:~$ createuser app_user --pwprompt
Enter password for new role: 
Enter it again: 
postgres@srv-01:~$ 

postgres@srv-01:~$ createdb app_db
postgres@srv-01:~$ 

postgres@srv-01:~$ psql app_db
psql (9.5.12)
Type &quot;help&quot; for help.

app_db=# GRANT ALL ON DATABASE app_db TO app_user;
GRANT
app_db=# \q
postgres@srv-01:~$ 
</code></pre></div><hr> <h1 id="在-os-x-環境運作"><a href="#在-os-x-環境運作" class="header-anchor">#</a> 在 OS X 環境運作</h1> <h2 id="_1-安裝作業"><a href="#_1-安裝作業" class="header-anchor">#</a> (1) 安裝作業</h2> <ul><li><p>下載：使用 <strong>EnterpriseDB 套件安裝，下載處：</strong> https://www.enterprisedb.com/downloads/postgres-postgresql-downloads#linux</p></li> <li><p>安裝處： ~/Applications/PostgreSQL/9.6</p></li> <li><p>設定檔存放路徑： ~~/Applications/PostgreSQL/9.6/data</p></li> <li><p>執行檔存放路徑： ~/Applications/PostgreSQL/9.6/bin</p></li> <li><p>Service 檔存放路徑：/lib/systemd/system/postgresql-9.6.service</p></li></ul> <h2 id="_2-檢驗及確認-postgresql-server-是否已啟動"><a href="#_2-檢驗及確認-postgresql-server-是否已啟動" class="header-anchor">#</a> (2) 檢驗及確認 PostgreSQL Server 是否已啟動</h2> <p>透過目錄 <strong>PATH 檢查及確認己安裝</strong></p> <div class="language- extra-class"><pre><code>$ which pg_ctl
/home/alanjui/Applications/PostgreSQL/9.6/bin/pg_ctl
</code></pre></div><p><strong>檢查 Service ，確認是否已啟動</strong></p> <div class="language- extra-class"><pre><code>$ service postgresql-9.6 status
</code></pre></div><p><strong>檢查 psql shell (PostgreSQL Client) 可連上 PostgreSQL Server</strong></p> <div class="language- extra-class"><pre><code>$ pgsql -h 127.0.0.1 -U postgres

$ pgsql -h localhost -U postgres

$ pgsql -h 192.168.66.10 -U postgres
</code></pre></div><p><strong>檢查 Port: 5432 是否已在使用中</strong></p> <div class="language- extra-class"><pre><code>$ netstat -tulnp | grep 5432
</code></pre></div><hr> <h1 id="pgadmin4"><a href="#pgadmin4" class="header-anchor">#</a> pgAdmin4</h1> <h2 id="安裝方法一"><a href="#安裝方法一" class="header-anchor">#</a> 安裝方法一</h2> <div class="language- extra-class"><pre><code>$ sudo sh -c 'echo &quot;deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg main&quot; &gt; /etc/apt/sources.list.d/pgdg.list'

$ cat /etc/apt/sources.list.d/pgdg.list                                 
deb http://apt.postgresql.org/pub/repos/apt/ xenial-pgdg main
</code></pre></div><p>下載 Repository Key ：  https://www.postgresql.org/media/keys/ACCC4CF8.asc</p> <div class="language- extra-class"><pre><code>$ sudo apt-get install wget ca-certificates
$ wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
$ sudo apt-get update
$ sudo apt-get upgrade
$ sudo apt-get install pgadmin4
</code></pre></div><hr> <h2 id="安裝方法二"><a href="#安裝方法二" class="header-anchor">#</a> 安裝方法二</h2> <div class="language- extra-class"><pre><code>$ sudo apt-get install virtualenv python-pip libpq-dev python-dev

$ cd
$ virtualenv pgadmin4
$ cd pgadmin4
$ source bin/activate

$ wget https://ftp.postgresql.org/pub/pgadmin/pgadmin4/v1.6/pip/pgadmin4-1.6-py2.py3-none-any.whl

$ pip install pgadmin4-1.6-py2.py3-none-any.whl
</code></pre></div><h2 id="設定作業"><a href="#設定作業" class="header-anchor">#</a> 設定作業</h2> <p><strong>設定 SERVER_MODE</strong></p> <p>於設定檔： <code>~/pgadmin4/lib/python2.7/site-packages/pgadmin4/config_local.py</code> 加入「<code>SERVER_MODE = False</code>」設定（run in single-user mode）：</p> <div class="language- extra-class"><pre><code>$ echo &quot;SERVER_MODE = False&quot; &gt;&gt; lib/python2.7/site-packages/pgadmin4/config_local.py
</code></pre></div><p><strong>在 Shell 設定「別名(alias)」</strong></p> <p>修改下列設定檔：</p> <ul><li>~/.zshrc</li> <li>~/.bashrc</li> <li><h1 id="pgadmin4-2"><a href="#pgadmin4-2" class="header-anchor">#</a> pgAdmin4</h1>
alias pgadmin='source ~/pgadmin4/bin/activate  &amp;&amp; python ~/pgadmin4/lib/python2.7/site-packages/pgadmin4/pgAdmin4.py'</li></ul> <p>啟動 pgAdmin4</p> <p>（１）在終端機執行指令(alias: pgadmin)</p> <div class="language- extra-class"><pre><code>$ pgadmin
</code></pre></div><p>（２）在 Web Browser 瀏覽網址： http://127.0.0.1:5050/</p> <hr> <h1 id="資料庫管理"><a href="#資料庫管理" class="header-anchor">#</a> 資料庫管理</h1> <h2 id="建置專案用資料庫"><a href="#建置專案用資料庫" class="header-anchor">#</a> 建置專案用資料庫</h2> <p><strong>建立使用者帳戶</strong></p> <div class="language- extra-class"><pre><code>$ sudo -u postgres createuser django2_helloworld -P
</code></pre></div><p>-P 表 Password，當要求輸入 password 時，輸入： <strong>Passw0rd</strong> 。</p> <p><strong>建立資料庫並設定使用者帳戶</strong></p> <div class="language- extra-class"><pre><code>$ sudo -u postgres createdb django2_helloworld_db -O django2_helloworld
</code></pre></div><p>-O: Owner</p> <p>DB URL:  post</p> <h2 id="建置-mail-server"><a href="#建置-mail-server" class="header-anchor">#</a> 建置 Mail Server</h2> <div class="language- extra-class"><pre><code>sudo -u postgres createuser mail_server -P
sudo -u postgres createdb mail_server_db -O mail_server


postgresql://\[user[:password]@\][netloc]\[:port\][/dbname][?param1=value1&amp;...]



Here are examples from same document
postgresql://
postgresql://localhost
postgresql://localhost:5432
postgresql://localhost/mydb
postgresql://user@localhost
postgresql://user:secret@localhost
postgresql://other@localhost/otherdb?connect_timeout=10&amp;application_name=myapp
postgresql://localhost/mydb?user=other&amp;password=secret


postgresql://mail_server:Passw0rd@192.168.66.10:5432/mail_server_db



# vim /opt/postfixadmin/config.local.php

&lt;?php
$CONF['database_type'] = 'mysqli';
$CONF['database_user'] = 'postfix';
$CONF['database_password'] = 'postfix-db-password';
$CONF['database_name'] = 'postfix';

$CONF['configured'] = true;
?&gt;


# vim /opt/postfixadmin/config.local.php

&lt;?php
$CONF['database_type'] = 'pgsql';
$CONF['database_user'] = 'mail_server';
$CONF['database_password'] = 'Passw0rd';
$CONF['database_name'] = 'mail_server_db';

$CONF['configured'] = true;
?&gt;
</code></pre></div><h1 id="安裝-lepp-伺服器"><a href="#安裝-lepp-伺服器" class="header-anchor">#</a> 安裝 LEPP 伺服器</h1> <div class="language- extra-class"><pre><code>$ sudo -u postgres psql postgres
psql (11.2 (Ubuntu 11.2-1.pgdg18.04+1))
Type &quot;help&quot; for help.
postgres=# create user &quot;www-data&quot; with password 'Passw0rd';
CREATE ROLE
postgres=# create database lepp_db with owner &quot;www-data&quot;;
CREATE DATABASE
postgres=# grant all privileges on database lepp_db to &quot;www-data&quot;;
GRANT
postgres=# \q
alanjui@SRV-01:~$


$ sudo apt install postfix-pgsql sasl2-bin
</code></pre></div><h1 id="psql-shell-操作"><a href="#psql-shell-操作" class="header-anchor">#</a> PSQL Shell 操作</h1> <h2 id="登入"><a href="#登入" class="header-anchor">#</a> 登入</h2> <div class="language- extra-class"><pre><code>psql -h &lt;IP/Host&gt; -d &lt;Database&gt; -U &lt;UserAccount&gt;
</code></pre></div><p>登入 localhost</p> <div class="language- extra-class"><pre><code>alanjui at Srv-01 in [~]   
10:55:31 $ psql -h localhost -d postgres -U postgres
psql.bin (9.6.3)
Type &quot;help&quot; for help.

Cannot read termcap database;
using dumb terminal settings.
postgres=# quit()
postgres-# \q
</code></pre></div><p>登入 192.168.66.10:</p> <div class="language- extra-class"><pre><code>alanjui at Srv-01 in [~]   
11:03:56 $ psql -h 192.168.66.10 -d postgres -U postgres
Password for user postgres: 
psql.bin (9.6.3)
Type &quot;help&quot; for help.

Cannot read termcap database;
using dumb terminal settings.
postgres=# 
</code></pre></div><hr> <h2 id="常用指令"><a href="#常用指令" class="header-anchor">#</a> 常用指令</h2> <p><strong>條列所有 Database</strong></p> <div class="language- extra-class"><pre><code>\list (\l)
</code></pre></div><p><strong>切換「使用中的 Database」</strong></p> <div class="language- extra-class"><pre><code>\connect &lt;database&gt;  (\c)
</code></pre></div><p><strong>條列 Database 所有的 Table</strong></p> <div class="language- extra-class"><pre><code>\dt
</code></pre></div><hr> <h2 id="退出psql"><a href="#退出psql" class="header-anchor">#</a> 退出PSQL</h2> <p>使用 \q 指令。</p> <div class="language- extra-class"><pre><code>alanjui at Srv-01 in [~]   
9:30:56 $ psql
psql.bin (9.6.3)
Type &quot;help&quot; for help.

Cannot read termcap database;
using dumb terminal settings.
alanjui=# \q

alanjui at Srv-01 in [~]   
10:53:43 $ 
</code></pre></div><hr> <h2 id="在正式資料庫伺服器建立資料庫及管理員"><a href="#在正式資料庫伺服器建立資料庫及管理員" class="header-anchor">#</a> 在正式資料庫伺服器建立資料庫及管理員</h2> <p>在正式環境的 PostgreSQL ，建立資料庫，並指派資料庫之管理員帳號。</p> <p><strong>(1) Change the user to postgres :</strong></p> <div class="language- extra-class"><pre><code>su - postgres
</code></pre></div><p><strong>(2) Create User for Postgres</strong></p> <div class="language- extra-class"><pre><code>$ createuser testuser
</code></pre></div><p><strong>(3) Create Database</strong></p> <div class="language- extra-class"><pre><code>$ createdb testdb
</code></pre></div><p><strong>(4) Access the postgres Shell</strong></p> <div class="language- extra-class"><pre><code>psql ( enter the password for postgressql)
</code></pre></div><p><strong>(5) Provide the privileges to the postgres user</strong></p> <div class="language- extra-class"><pre><code>$ alter user testuser with encrypted password 'qwerty';
$ grant all privileges on database testdb to testuser;
</code></pre></div><hr> <h2 id="在開發資料庫伺服器建立資料庫及管理員"><a href="#在開發資料庫伺服器建立資料庫及管理員" class="header-anchor">#</a> 在開發資料庫伺服器建立資料庫及管理員</h2> <p>在開發環境用 PostgreSQL 伺服器，建立資料庫及使用者帳號。開發環境的 PostgreSQL ，系以 Docker Image 架設而成。</p> <p>進入  <strong>psql  shell</strong></p> <div class="language- extra-class"><pre><code>docker ps
docker run -it --rm --link psql-db:postgres postgres psql -h postgres -U postgres
</code></pre></div><p><strong>建立資料庫</strong></p> <div class="language- extra-class"><pre><code>CREATE DATABASE [Database]
</code></pre></div><p><strong>建立使用者帳號</strong></p> <div class="language- extra-class"><pre><code>CREATE USER [User] WITH PASSWORD [Password];
</code></pre></div><p><strong>指派資料庫的管理員</strong></p> <div class="language- extra-class"><pre><code>GRANT ALL PRIVILEGES ON DATABASE [Database] to [User];
</code></pre></div><p><strong>Revoke privileges from a user</strong></p> <div class="language- extra-class"><pre><code>REVOKE ALL PRIVILEGES ON [Database] FROM [User|readonly];
</code></pre></div><p><strong>刪除使用者帳號</strong></p> <div class="language- extra-class"><pre><code>DROP USER [User|readonly];



GRANT ALL ON SEQUENCE public.pups_id_seq TO webapp WITH GRANT OPTION;
GRANT ALL ON TABLE public.pups TO webapp WITH GRANT OPTION;
</code></pre></div><p>操作範例：</p> <div class="language- extra-class"><pre><code>$ docker run -it --rm --link psql-db:postgres postgres psql -h postgres -U postgres
Password for user postgres: 
psql (10.4 (Debian 10.4-2.pgdg90+1))
Type &quot;help&quot; for help.

postgres=#
...
postgres=# create database django2_helloworld_qa;
CREATE DATABASE
postgres=# create user webapp with password 'Passw0rd';
CREATE ROLE
postgres=# grant all privileges on database django2_helloworld_qa to webapp;
GRANT
postgres=# \q
</code></pre></div><hr> <h2 id="import-csv-檔案"><a href="#import-csv-檔案" class="header-anchor">#</a> Import CSV 檔案</h2> <p>以下之操作，透過 pgAdmin 4 V2 的 Query Tool 執行</p> <p>（1）<strong>先建立 Table</strong></p> <div class="language- extra-class"><pre><code>CREATE TABLE persons
(
  id serial NOT NULL,
  first_name character varying(50),
  last_name character varying(50),
  dob date,
  email character varying(255),
  CONSTRAINT persons_pkey PRIMARY KEY (id)
)
</code></pre></div><p><strong>（2）匯入 CSV 資料檔</strong></p> <div class="language- extra-class"><pre><code>COPY persons(first_name, last_name, dob, email) 
FROM '/Users/AlanJui/data/csv/persons.csv' DELIMITER ',' CSV HEADER;
</code></pre></div><p>【註】：  在 Query Tool 的認定： “~/data” 不等同 “/Users/AlanJui/data” ，所以檔案的路徑不能簡寫成 “~/data/csv/persons.csv” 。</p> <p>參考： http://www.postgresqltutorial.com/import-csv-file-into-posgresql-table/</p> <h2 id="自-table-匯出成-csv-檔案"><a href="#自-table-匯出成-csv-檔案" class="header-anchor">#</a> 自 Table 匯出成 csv 檔案</h2> <div class="language- extra-class"><pre><code>copy public.persons (first_name, last_name, dob, email) 
TO '/Users/AlanJui/data/csv/persons_out.csv' CSV HEADER;
</code></pre></div><p>參考： http://www.postgresqltutorial.com/export-postgresql-table-to-csv-file/</p> <p>在「終端機」使用下列指令：</p> <div class="language- extra-class"><pre><code>AlanJui at MacBook-Pro.local in [/usr/local]
19:17:18 $ psql --command &quot;copy public.persons (first_name, last_name, dob, email) TO '/Users/AlanJui/data/csv/persons_out.csv' CSV HEADER;&quot;
COPY 3

AlanJui at MacBook-Pro.local in [/usr/local]
19:18:11 $ cat ~/data/csv/persons_out.csv
first_name,last_name,dob,email
Alan, Jui,1960-09-25, alanjui.1960@gmail.com
Stacy, Wu,1967-08-18, stacywu88@gmail.com
Amos, Jui,2004-06-04, juchuling@gmail.com
</code></pre></div><hr> <h2 id="create-database"><a href="#create-database" class="header-anchor">#</a> Create Database</h2> <div class="language- extra-class"><pre><code>CREATE DATABASE learning
    WITH 
    OWNER = alanjui
    ENCODING = 'UTF8'
    CONNECTION LIMIT = -1;
</code></pre></div><hr> <h1 id="faq"><a href="#faq" class="header-anchor">#</a> FAQ</h1> <h2 id="無法連上-postgresql-server"><a href="#無法連上-postgresql-server" class="header-anchor">#</a> 無法連上 PostgreSQL Server</h2> <p><img src="https://d2mxuefqeaa7sj.cloudfront.net/s_B5D84C4CD091B402741E9B2DC97DB9F649A1F2200CF14975E381CC7C9BCE25F5_1500778899268_image.png" alt=""></p> <p>Unable to connect to server:</p> <p>FATAL: no pg_hba.conf entry for host &quot;192.168.66.110&quot;, user &quot;postgres&quot;, database &quot;postgres&quot;, SSL off</p> <hr> <p>上述問題係 PostgreSQL 尚未設定成允許 Remote 連線及條件。</p> <p>（1）檢查設定檔 <code>postgresql.conf</code> ，確定任何一個 IP ，都可發出連線要求：</p> <div class="language- extra-class"><pre><code>listen_addresses = '*'
</code></pre></div><p>（2）檢查設定檔 <code>pg_hba.conf</code> ，確定已設定可供連線的 Host 、資料庫、使用者、IP、身份驗證法</p> <div class="language- extra-class"><pre><code># TYPE  DATABASE        USER            ADDRESS                 METHOD

# &quot;local&quot; is for Unix domain socket connections only
local   all             all                                     trust
# IPv4 local connections:
host    all             all             127.0.0.1/32            trust
# IPv6 local connections:
host    all             all             ::1/128                 trust

host    all             all             192.168.66.0/24         md5
host    all             all             192.168.66.110/32       trust
#host    all             all             0.0.0.0/0               md5 
</code></pre></div><p>（3）重新啟動 PostgreSQL Service</p> <div class="language- extra-class"><pre><code>$ service postgresql-9.6 restart
</code></pre></div><hr> <h2 id="無法進行-db-query"><a href="#無法進行-db-query" class="header-anchor">#</a> 無法進行 DB Query</h2> <p>得到錯誤訊息：</p> <div class="language- extra-class"><pre><code>Error: permission denied for relation pups at Connection.parseE ….
</code></pre></div><p>使用 pgAdmin 4 (V2) 在 psql shell (非在 Query Tools） 進行如下設定：</p> <div class="language- extra-class"><pre><code>CREATE USER readonly  WITH ENCRYPTED PASSWORD 'readonly';
GRANT USAGE ON SCHEMA public to readonly;
ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT ON TABLES TO readonly;

-- repeat code below for each database:

GRANT CONNECT ON DATABASE puppies to readonly;
\c puppies
ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL ON TABLES TO readonly; --- this grants privileges on new tables generated in new database &quot;puppies&quot;
GRANT USAGE ON SCHEMA public to readonly; 
GRANT SELECT ON ALL SEQUENCES IN SCHEMA public TO readonly;
GRANT SELECT ON ALL TABLES IN SCHEMA public TO readonly;
</code></pre></div><hr> <h2 id="docker-compose-and-django"><a href="#docker-compose-and-django" class="header-anchor">#</a> Docker Compose and Django</h2> <p>有時候，在 docker compose 中的 db 被玩壞了， ./manage.py migrate 再也無法正常運作之時，可以透過以下的方式重建 Database: postgres 。</p> <p><strong>(1) 清除所有 migrations</strong>
執行以下指令之前，先將「目錄」選在 <Project Rooot=""> 目錄。</Project></p> <div class="language- extra-class"><pre><code>$ find . -path &quot;*/migrations/*.py&quot; -not -name &quot;__init__.py&quot; -delete
$ find . -path &quot;*/migrations/*.pyc&quot;  -delete
</code></pre></div><p><strong>(2) 進入 docker-compose 中的 db container</strong></p> <div class="language- extra-class"><pre><code>$ docker-copose up
$ docker-compose exec db bash
</code></pre></div><p><strong>(3) 刪除 Database: postgres</strong></p> <div class="language- extra-class"><pre><code>$ dropdb -h localhost -p 5432 -U postgres postgres
</code></pre></div><p><strong>(4) 重建 Database: postgres</strong></p> <div class="language- extra-class"><pre><code>$ createdb -h localhost -p 5432 -U postgres postgres
</code></pre></div><p><strong>(5) 驗證</strong></p> <div class="language- extra-class"><pre><code>$ psql -h localhost -p 5432 -U postgres
postgres=# \l
                                 List of databases
   Name    |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges
-----------+----------+----------+------------+------------+-----------------------
 postgres  | postgres | UTF8     | en_US.utf8 | en_US.utf8 |
 template0 | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +
           |          |          |            |            | postgres=CTc/postgres
 template1 | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +
           |          |          |            |            | postgres=CTc/postgres
(3 rows)

postgres=#\q
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/Django4-Project-Template/assets/js/app.85744e83.js" defer></script><script src="/Django4-Project-Template/assets/js/2.c06a707d.js" defer></script><script src="/Django4-Project-Template/assets/js/200.11208b28.js" defer></script>
  </body>
</html>
