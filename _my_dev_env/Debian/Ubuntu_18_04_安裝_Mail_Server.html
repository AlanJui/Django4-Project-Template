<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ubuntu 18.04 安裝 Mail Server | 《專案文件舘》</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="彙集專案相關文件">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/Django4-Project-Template/assets/css/0.styles.61339c89.css" as="style"><link rel="preload" href="/Django4-Project-Template/assets/js/app.85744e83.js" as="script"><link rel="preload" href="/Django4-Project-Template/assets/js/2.c06a707d.js" as="script"><link rel="preload" href="/Django4-Project-Template/assets/js/104.ca8756b0.js" as="script"><link rel="prefetch" href="/Django4-Project-Template/assets/js/10.5691f3a9.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/100.90a68d78.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/101.360c8a2f.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/102.36bb47bb.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/103.d1ba6b6e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/105.bb44451a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/106.79d9ae76.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/107.1e503b0f.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/108.b25055d6.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/109.97826a20.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/11.c9957984.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/110.db13e115.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/111.97dd95f0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/112.2356b060.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/113.ac91f33a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/114.7fcced81.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/115.c4f155c8.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/116.9fa2f994.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/117.06c8327e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/118.f1f509c9.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/119.44573aa4.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/12.f2698b52.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/120.9e3a8e4a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/121.289a8fa4.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/122.125ae6d7.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/123.383957db.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/124.29eeaa27.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/125.634ea15e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/126.5f981fa6.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/127.0f09b16b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/128.7d8a4d9a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/129.a0b49d00.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/13.9183137b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/130.002c040f.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/131.141ba121.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/132.29f09a8f.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/133.af0ab2c6.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/134.4ceafcb1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/135.a068a819.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/136.b14ff692.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/137.6ac48650.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/138.4bad394c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/139.b9f365da.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/14.cd75f347.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/140.5045f9fe.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/141.c706ae9a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/142.cac4f43c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/143.f9002cab.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/144.0c32198b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/145.cb0cb0b8.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/146.a03fc4b5.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/147.61e8e992.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/148.804c6789.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/149.36d21911.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/15.a39394c3.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/150.303e3675.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/151.c4326470.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/152.c64268eb.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/153.42722b30.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/154.bceead00.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/155.9b134554.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/156.a94162b0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/157.ae3573b5.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/158.b24de0cd.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/159.f04cd068.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/16.9da12a08.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/160.a1f1177d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/161.7fd424bf.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/162.af12ef29.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/163.385bc4cd.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/164.9d186eb4.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/165.94f26bb2.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/166.81ab1171.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/167.b40a9186.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/168.bac35a7d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/169.c508ce6b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/17.ce305e5a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/170.e1ac4979.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/171.4d648b60.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/172.dc5f8c22.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/173.a4e5f963.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/174.7fb4eaab.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/175.e63effd6.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/176.d21920b6.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/177.bbb2769f.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/178.eff1705d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/179.0c6ae38b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/18.b46b18ca.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/180.5d0ac9c3.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/181.3a235f4f.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/182.78e47913.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/183.8d9dbc6e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/184.ec43d72e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/185.12e07699.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/186.979d94df.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/187.a4cb4b45.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/188.3cbcf071.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/189.f26e2804.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/19.da5434b3.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/190.49db0e53.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/191.6b065322.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/192.d9a8e122.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/193.f7dd8204.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/194.ca87dc6a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/195.4026f0d1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/196.f9a0a5bb.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/197.b18ae4b8.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/198.698ceb55.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/199.b5c710e7.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/20.468eb836.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/200.11208b28.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/201.88b5fc5a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/202.e3e2c818.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/203.98117947.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/204.ab9c9f8d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/205.12585880.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/206.84f7159b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/207.d8e5917a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/208.de8779f0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/209.8675d701.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/21.8ca83c99.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/210.c1e73d71.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/211.b62309e5.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/212.2a9479fa.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/213.87009306.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/214.d10ac19e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/215.b6392483.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/216.b03c57b8.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/217.80498e7b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/218.880e1882.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/219.f5c0eba1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/22.d1799073.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/220.f63e0dc0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/221.6a194125.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/222.b02b43a1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/223.9d1f926d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/224.68f4f8c1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/225.1b370f31.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/226.5aeab5ef.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/227.e6d038fa.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/228.9df23b8e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/229.6f2b9ac2.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/23.2ccc740d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/230.deb441a6.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/231.8a705474.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/232.7671854c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/233.dca06f36.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/234.68459d49.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/235.10211cb7.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/236.f0c5c454.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/237.e082dca5.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/238.1877b6cb.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/239.81368ecf.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/24.28d0fabf.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/240.4568ba76.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/241.682e5125.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/242.a12343d0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/243.de07e131.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/244.8bc96641.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/245.f89663b9.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/246.bd19c1fd.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/247.358c89cd.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/248.f60713cd.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/249.1b193473.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/25.2a3adaf0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/250.4c252b00.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/251.42d7f618.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/252.3c806581.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/253.d80d6188.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/254.b2f81131.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/255.e2c4e69f.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/256.c69afff6.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/257.3cbb31c7.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/258.5171d83a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/259.8ba4bed7.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/26.dc91b7f1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/260.4673c31b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/261.c9e285a1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/262.53bf93ff.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/263.aba5408d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/264.138e998d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/265.1aa3d96e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/266.2a0d3bbf.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/267.5b3da12d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/268.16309f96.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/269.b3b4b3e5.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/27.ef7c877f.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/270.33f8e11b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/271.20bb3554.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/272.f8e4e3cc.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/273.a8fb79bd.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/274.8cffbf46.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/275.36baa41c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/276.b066be42.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/277.5f455a2a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/278.8eb4690e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/279.edc03317.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/28.a3a59f5c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/280.a9f1222c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/281.c8b74bb0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/282.2e438fd4.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/283.aa42a9e1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/284.4db32622.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/285.995ab829.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/286.9af42296.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/287.d5baf962.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/288.9dc17dd7.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/289.39ba33e9.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/29.54b38b5c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/290.9d0408fe.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/291.2b93a0fa.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/292.9933e60d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/293.9818cfa8.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/294.19682b99.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/295.5d5b16f5.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/296.2cc6e818.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/297.9db9d22b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/298.49a5646c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/299.c5393e3e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/3.84478ca7.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/30.8c196357.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/300.7819e1ff.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/301.7b4ab8db.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/31.2eddc5f8.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/32.e044508d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/33.f55803ad.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/34.47d65a8c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/35.d5a2486d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/36.cf6c774e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/37.f1ea0c9c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/38.96b16560.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/39.bfc5a8b0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/4.65cb635a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/40.a86ffc2b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/41.4fc59a93.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/42.83b3fca0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/43.4539d518.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/44.a46b34bc.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/45.1bf4d919.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/46.9ddfe64a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/47.2ef1c49b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/48.954bb735.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/49.fbe30a7d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/5.3f65dc24.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/50.647fc27f.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/51.342b017e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/52.dc638d66.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/53.a7755902.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/54.c8dabbcc.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/55.f0d00c3e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/56.b80a8eac.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/57.af95c5a1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/58.b4c273a9.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/59.245c8db1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/6.98bb6adc.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/60.f3929800.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/61.33048821.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/62.2797510b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/63.c6b684a1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/64.2238531e.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/65.c1ce3b29.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/66.a3816f43.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/67.25003ffd.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/68.d1e70a31.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/69.91e3e0b3.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/7.d84d1ad0.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/70.79380f13.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/71.76792141.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/72.1963b645.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/73.18cf47cc.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/74.227fbb9c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/75.496f4453.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/76.522392c3.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/77.3110c92f.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/78.ad9ce75a.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/79.c0b23700.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/8.b237f028.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/80.e1876902.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/81.e3776492.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/82.89780882.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/83.63d2f2fa.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/84.2c5e7730.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/85.4abef243.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/86.fac01eb7.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/87.287b1e6d.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/88.860d47f8.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/89.876679d1.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/9.905004ab.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/90.660f1b21.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/91.51871172.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/92.3530d643.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/93.fc37ba4c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/94.bda706b2.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/95.bb34c42c.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/96.c3587b2b.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/97.9a4e2663.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/98.794f94e6.js"><link rel="prefetch" href="/Django4-Project-Template/assets/js/99.ccc3d771.js">
    <link rel="stylesheet" href="/Django4-Project-Template/assets/css/0.styles.61339c89.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Django4-Project-Template/" class="home-link router-link-active"><!----> <span class="site-name">《專案文件舘》</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Django4-Project-Template/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/Django4-Project-Template/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Django4-Project-Template/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/Django4-Project-Template/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>作業指引</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Django4-Project-Template/d100_URS/" class="sidebar-link">使用者需求</a></li><li><a href="/Django4-Project-Template/d200_SRS/" class="sidebar-link">系統需求</a></li><li><a href="/Django4-Project-Template/d300_SDD/" class="sidebar-link">系統設計</a></li><li><a href="/Django4-Project-Template/d400_DEV/" class="sidebar-link">開發與測試</a></li><li><a href="/Django4-Project-Template/d500_OP/" class="sidebar-link">系統維運</a></li><li><a href="/Django4-Project-Template/d900_REF/" class="sidebar-link">其它⋯⋯</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>電腦硬體</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>開發環境</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>常用工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>參考資料</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ubuntu-18-04-安裝-mail-server"><a href="#ubuntu-18-04-安裝-mail-server" class="header-anchor">#</a> Ubuntu 18.04 安裝 Mail Server</h1> <h1 id="事前準備"><a href="#事前準備" class="header-anchor">#</a> 事前準備</h1> <h2 id=""><a href="#" class="header-anchor">#</a></h2> <h2 id="dns-records-設定"><a href="#dns-records-設定" class="header-anchor">#</a> DNS Records 設定</h2> <p>在 DNS Server 應有的 DNS Records 。</p> <p><img src="https://paper-attachments.dropbox.com/s_29964F2DD0AAE3B4769BBC77CD42FD4AF112406072B19CA9F422FF7DFE219E92_1557541679034_image.png" alt=""></p> <div class="language- extra-class"><pre><code>; Domain: ccc99.tw
; Exported (y-m-d hh:mm:ss): 2019-03-27 21:47:30
;
; This file is intended for use for informational and archival
; purposes ONLY and MUST be edited before use on a production
; DNS server.
;
; In particular, you must update the SOA record with the correct
; authoritative name server and contact e-mail address information,
; and add the correct NS records for the name servers which will
; be authoritative for this domain.
;
; For further information, please consult the BIND documentation
; located on the following website:
;
; http://www.isc.org/
;
; And RFC 1035:
;
; http://www.ietf.org/rfc/rfc1035.txt
;
; Please note that we do NOT offer technical support for any use
; of this zone data, the BIND name server, or any other third-
; party DNS software.
;
; Use at your own risk.


; SOA Record
ccc99.tw.        3600         IN         SOA        ns69.domaincontrol.com.        dns.jomax.net. (
                                        2019032704
                                        28800
                                        7200
                                        604800
                                        3600
                                        ) 

; A Records
@        600         IN         A        180.218.139.80

; CNAME Records
mail       3600         IN         CNAME        @
www        3600         IN         CNAME        @
_domainconnect        3600         IN         CNAME        _domainconnect.gd.domaincontrol.com.

; MX Records
@        3600         IN         MX        10        @

; TXT Records

; SRV Records

; AAAA Records

; CAA Records

; NS Records
@        3600         IN         NS        ns69.domaincontrol.com.
@        3600         IN         NS        ns70.domaincontrol.com.
</code></pre></div><h2 id="host-名稱"><a href="#host-名稱" class="header-anchor">#</a> Host 名稱</h2> <p>檔案：/etc/hosts ，無需設定。</p> <div class="language- extra-class"><pre><code>127.0.0.1       localhost
192.168.66.10   SRV-01

192.168.66.100  myapp.ccc99.tw

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
</code></pre></div><h1 id="安裝-postfix"><a href="#安裝-postfix" class="header-anchor">#</a> 安裝 Postfix</h1> <p>於 IP： 192.168.66.10 伺服器安裝 Postfix</p> <h2 id="伺服器安裝作業"><a href="#伺服器安裝作業" class="header-anchor">#</a> 伺服器安裝作業</h2> <p><strong>安裝前置工作</strong></p> <div class="language- extra-class"><pre><code>sudo apt update
sudo apt upgrade
</code></pre></div><p><strong>安裝 Postfix 軟體套件</strong></p> <div class="language- extra-class"><pre><code>sudo DEBIAN_PRIORITY=low apt install postfix
</code></pre></div><p><img src="https://d2mxuefqeaa7sj.cloudfront.net/s_29964F2DD0AAE3B4769BBC77CD42FD4AF112406072B19CA9F422FF7DFE219E92_1553244457566_image.png" alt=""></p> <p>Postfix 安裝過程的「套件設定」:</p> <ul><li><strong>General type of mail configuration?</strong>: <strong>Internet Site</strong></li> <li><strong>System mail name</strong>: example.com (not mail.example.com): <strong>ccc99.tw</strong></li> <li><strong>Root and postmaster mail recipient</strong>: <strong>alanjui</strong></li> <li><strong>Other destinations to accept mail for</strong>: <strong>$myhostname, ccc99.tw, mail.ccc99.tw, SRV-01, localhost.localdomain, localhost</strong></li> <li><strong>Force synchronous updates on mail queue?</strong>: <strong>No</strong></li> <li><strong>Local networks</strong>: <strong>127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128 192.168.66.0/24</strong></li> <li><strong>Mailbox size limit</strong>: <strong>0</strong></li> <li><strong>Local address extension character</strong>: <strong>+</strong></li> <li><strong>Internet protocols to use</strong>: <strong>all</strong></li></ul> <p><strong>/etc/postfix/main.cf ：</strong></p> <div class="language- extra-class"><pre><code># See /usr/share/postfix/main.cf.dist for a commented, more complete version

# Debian specific:  Specifying a file name will cause the first
# line of that file to be used as the name.  The Debian default
# is /etc/mailname.
myorigin = /etc/mailname

smtpd_banner = $myhostname ESMTP $mail_name (Ubuntu)
biff = no

# appending .domain is the MUA's job.
append_dot_mydomain = no

# Uncomment the next line to generate &quot;delayed mail&quot; warnings
#delay_warning_time = 4h

readme_directory = no

# See http://www.postfix.org/COMPATIBILITY_README.html -- default to 2 on
# fresh installs.
compatibility_level = 2

# TLS parameters
#smtpd_tls_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem
#smtpd_tls_key_file=/etc/ssl/private/ssl-cert-snakeoil.key
smtpd_use_tls = yes
smtpd_tls_cert_file = /etc/letsencrypt/live/mail.ccc99.tw/fullchain.pem
smtpd_tls_key_file = /etc/letsencrypt/live/mail.ccc99.tw/privkey.pem
smtpd_tls_security_level = may
smtpd_tls_protocols = !SSLv2, !SSLv3 !TLSv1
#smtpd_tls_protocols = SSLv2, SSLv3 TLSv1
smtpd_tls_loglevel = 1
# to debug SASL Login authentication failed: UGFzc3dvcmQ6
smtpd_tls_auth_only = yes
smtpd_tls_session_cache_database = btree:${data_directory}/smtpd_scache

smtp_use_tls = yes
smtp_tls_security_level = may
smtp_tls_loglevel = 1
smtp_tls_session_cache_database = btree:${data_directory}/smtp_scache

# See /usr/share/doc/postfix/TLS_README.gz in the postfix-doc package for
# information on enabling SSL in the smtp client.

smtpd_relay_restrictions = permit_mynetworks permit_sasl_authenticated defer_unauth_destination

# ------------------------------------------------------------------------------------

smtpd_sasl_auth_enable = yes
smtpd_sasl_type = dovecot
smtpd_sasl_path = private/auth

# ====================================================================================

myhostname = mail.ccc99.tw
mydestination = $myhostname, ccc99.tw, mail.ccc99.tw, SRV-01, localhost.localdomain, localhost
relayhost =
mynetworks = 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128 192.168.66.0/24
mailbox_size_limit = 0
recipient_delimiter = +
inet_interfaces = all
inet_protocols = all

home_mailbox = Maildir/
mailbox_command =
queue_directory = /var/spool/postfix

alias_maps = hash:/etc/aliases
alias_database = hash:/etc/aliases

virtual_alias_maps = hash:/etc/postfix/virtual

# Dovecot LMTP: https://blog.pighead.cc/whsyu/2011/05/23/dovecot-lmtp/
mailbox_transport = lmtp:unix:private/dovecot-lmtp
#mailbox_transport = lmtp:unix:/var/spool/postfix/private/dovecot-lmtp
</code></pre></div><p><strong>產生 Virtual Map 檔案</strong></p> <p>Map mail address to Linux accounts.</p> <ol><li><p>設定 <strong>/etc/postfix/virtual :</strong></p> <p>root@ccc99.tw           admin
contact@ccc99.tw        admin
admin@ccc99.tw          admin
service@ccc99.tw        admin</p></li> <li><p>產生 Map 檔</p> <p>sudo postmap /etc/postfix/virtual</p></li></ol> <p><strong>產生 Aliases Map 檔案</strong></p> <ol><li><p>設定 <strong>/etc/aliases ：</strong></p> <p>postmaster : root
root : admin</p></li> <li><p>產生 Map 檔案</p> <p>sudo postalias /etc/aliases</p></li></ol> <p><strong>重新啟動 Postfix</strong></p> <div class="language- extra-class"><pre><code>sudo service postfix restart
</code></pre></div><h2 id="用戶端佈署設定"><a href="#用戶端佈署設定" class="header-anchor">#</a> 用戶端佈署設定</h2> <p>進行 Shell 環境（如：bash） 設定，指明 Mail Server 所使用的 Mail Box 類別。</p> <ol><li></li></ol> <div class="language- extra-class"><pre><code>$ echo 'export MAIL=~/Maildir' | sudo tee -a /etc/bash.bashrc | sudo tee -a /etc/profile.d/mail.sh
</code></pre></div><ol start="2"><li></li></ol> <div class="language- extra-class"><pre><code>$ source /etc/profile.d/mail.sh
</code></pre></div><h2 id="驗證-smtp"><a href="#驗證-smtp" class="header-anchor">#</a> 驗證 SMTP</h2> <p>使用 mail 工具程式測試寄郵件功能是否已能正常運作</p> <h2 id="使用-mutt-工具測試"><a href="#使用-mutt-工具測試" class="header-anchor">#</a> 使用 mutt 工具測試</h2> <p><strong>（1）安裝測試用工具軟體</strong></p> <div class="language- extra-class"><pre><code>sudo apt install mutt
</code></pre></div><p><strong>（2）設定組態</strong></p> <div class="language- extra-class"><pre><code>$ cd
$ nano ~/.muttrc
</code></pre></div><p>~/.muttrc</p> <div class="language- extra-class"><pre><code> 1 # About Me
 2 set from = &quot;alanjui@ccc99.tw&quot;
 3 set realname = &quot;Alan Jui&quot;
 4
 5 # My credentials
 6 set copy = yes
 7 set smtp_url = &quot;smtp://alanjui@mail.ccc99.tw:587/&quot;
 8 set smtp_pass = &quot;Alan5550@&quot;
 9 set imap_user = &quot;alanjui@mail.ccc99.tw&quot;
10 set imap_pass = &quot;Alan5550@&quot;
11
12 # My mailboxes
13 set folder = &quot;imaps://mail.ccc99.tw:993&quot;
14 set spoolfile = &quot;+INBOX&quot;
15 set record = +sent
16 set postponed = +drafts
17 #set spoolfile = &quot;imaps://mail.ccc99.tw/INBOX&quot;
18 #set record = &quot;imaps://mail.ccc99.tw/Sent&quot;
19 #set postponed=&quot;imaps://mail.ccc99.tw/Drafts&quot;
20
21 # Where to put the stuff
22 set header_cache = &quot;~/.mutt/cache/headers&quot;
23 set message_cachedir = &quot;~/.mutt/cache/bodies&quot;
24 set certificate_file = &quot;~/.mutt/certificates&quot;
25
26 # Etc
27 set mail_check = 30
28 set move = no
</code></pre></div><p><strong>執行測試指令</strong></p> <div class="language- extra-class"><pre><code>$ mutt
</code></pre></div><h2 id="使用-mail-工具測試"><a href="#使用-mail-工具測試" class="header-anchor">#</a> 使用 mail 工具測試</h2> <p><strong>安裝 mail 測試用工具</strong></p> <div class="language- extra-class"><pre><code>sudo apt install mailutils
</code></pre></div><p><strong>執行測試指令</strong></p> <div class="language- extra-class"><pre><code>alanjui@SRV-01:~$ echo &quot;This email confirms that Postfix is working&quot; | mail -s &quot;Testing Postfix&quot; alanjui.1960@gmail.com


echo &quot;This email confirms that Postfix is working&quot; | mail -s &quot;Testing Postfix&quot; juzhengzhong@gmail.com
</code></pre></div><hr> <h1 id="dovecot"><a href="#dovecot" class="header-anchor">#</a> Dovecot</h1> <p>https://www.linuxbabe.com/mail-server/secure-email-server-ubuntu-16-04-postfix-dovecot</p> <h2 id="保障通信安全"><a href="#保障通信安全" class="header-anchor">#</a> 保障通信安全</h2> <p><strong>安裝套件軟體</strong></p> <p>【參考文件】： https://certbot.eff.org/lets-encrypt/ubuntubionic-nginx</p> <p>使用 TLS 通信協定，用以確保「郵件用戶端」與「郵件伺服器」，兩著間的通信資料，以加密方式傳送。</p> <div class="language- extra-class"><pre><code>$ sudo apt update
$ sudo apt install software-properties-common
$ sudo add-apt-repository universe
$ sudo add-apt-repository ppa:certbot/certbot
$ sudo apt update
$ sudo apt install certbot  



sudo apt install python-certbot-nginx
</code></pre></div><p><strong>建置 Virtual Host 用以取得 TLS 憑證</strong></p> <div class="language- extra-class"><pre><code>sudo nano /etc/nginx/conf.d/mail.ccc99.tw.conf


# mail.ccc99.tw.conf
server {
    server_name mail.ccc99.tw;

    root /var/www/mail.ccc99.tw/;

    location ~ /.well-known/acme-challenge {
        allow all;
    }

    listen 443 ssl; # managed by Certbot
    ssl_certificate /etc/letsencrypt/live/mail.ccc99.tw/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/mail.ccc99.tw/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot


    add_header Strict-Transport-Security &quot;max-age=31536000&quot; always; # managed by Certbot
}
server {
    if ($host = mail.ccc99.tw) {
        return 301 https://$host$request_uri;
    } # managed by Certbot


    listen 80;
    server_name mail.ccc99.tw;

    root /var/www/mail.ccc99.tw/;

    location ~ /.well-known/acme-challenge {
        allow all;
    }
}




sudo mkdir /var/www/mail.ccc99.tw
sudo chown -R www-data:www-data /var/www/mail.ccc99.tw

sudo service nginx reload
</code></pre></div><p><strong>啟用 certbot 的 nginx plugin</strong></p> <div class="language- extra-class"><pre><code>$ sudo certbot --nginx



$ sudo certbot --nginx --agree-tos --redirect --hsts --email alanjui.1960@gmail.com -d mail.ccc99.tw
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Plugins selected: Authenticator nginx, Installer nginx
Attempting to parse the version 0.33.1 renewal configuration file found at /etc/letsencrypt/renewal/mail.ccc99.tw.conf with version 0.31.0 of Certbot. This might not work.
Cert not yet due for renewal

You have an existing certificate that has exactly the same domains or certificate name you requested and isn't close to expiry.
(ref: /etc/letsencrypt/renewal/mail.ccc99.tw.conf)

What would you like to do?
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
1: Attempt to reinstall this existing certificate
2: Renew &amp; replace the cert (limit ~5 per 7 days)
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Select the appropriate number [1-2] then [enter] (press 'c' to cancel): 2
Renewing an existing certificate
Performing the following challenges:
http-01 challenge for mail.ccc99.tw
Waiting for verification...
Cleaning up challenges
Deploying Certificate to VirtualHost /etc/nginx/conf.d/mail.ccc99.tw.conf
Enhancement Strict-Transport-Security was already set.
Traffic on port 80 already redirecting to ssl in /etc/nginx/conf.d/mail.ccc99.tw.conf

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Your existing certificate has been successfully renewed, and the new certificate
has been installed.

The new certificate covers the following domains: https://mail.ccc99.tw

You should test your configuration at:
https://www.ssllabs.com/ssltest/analyze.html?d=mail.ccc99.tw
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

IMPORTANT NOTES:
 - Congratulations! Your certificate and chain have been saved at:
   /etc/letsencrypt/live/mail.ccc99.tw/fullchain.pem
   Your key file has been saved at:
   /etc/letsencrypt/live/mail.ccc99.tw/privkey.pem
   Your cert will expire on 2019-08-12. To obtain a new or tweaked
   version of this certificate in the future, simply run certbot again
   with the &quot;certonly&quot; option. To non-interactively renew *all* of
   your certificates, run &quot;certbot renew&quot;
 - If you like Certbot, please consider supporting our work by:

   Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate
   Donating to EFF:                    https://eff.org/donate-le
</code></pre></div><p><strong>驗證憑證可用</strong></p> <div class="language- extra-class"><pre><code>https://www.ssllabs.com/ssltest/analyze.html?d=mail.ccc99.tw
</code></pre></div><p><strong>更新憑證</strong></p> <div class="language- extra-class"><pre><code>$ sudo certbot renew --dry-run
Saving debug log to /var/log/letsencrypt/letsencrypt.log

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Processing /etc/letsencrypt/renewal/ccc99.tw.conf
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Cert not yet due for renewal

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Processing /etc/letsencrypt/renewal/mail.ccc99.tw.conf
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Cert not yet due for renewal

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

The following certs are not due for renewal yet:
  /etc/letsencrypt/live/ccc99.tw/fullchain.pem expires on 2019-07-01 (skipped)
  /etc/letsencrypt/live/mail.ccc99.tw/fullchain.pem expires on 2019-08-12 (skipped)
No renewals were attempted.
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
</code></pre></div><h2 id="設定-postfix-在-submission-daemon-使用-tls"><a href="#設定-postfix-在-submission-daemon-使用-tls" class="header-anchor">#</a> 設定 postfix 在 submission daemon 使用 TLS</h2> <div class="language- extra-class"><pre><code>sudo nano /etc/postfix/master.cf



submission     inet     n    -    y    -    -    smtpd
  -o syslog_name=postfix/submission
  -o smtpd_tls_security_level=encrypt
  -o smtpd_tls_wrappermode=no
  -o smtpd_sasl_auth_enable=yes
  -o smtpd_relay_restrictions=permit_sasl_authenticated,reject
  -o smtpd_recipient_restrictions=permit_mynetworks,permit_sasl_authenticated,reject
  -o smtpd_sasl_type=dovecot
  -o smtpd_sasl_path=private/auth
</code></pre></div><p>The above configuration enables the submission daemon of Postfix and requires TLS encryption. So later on our desktop email client can connect to the submission daemon in TLS. The submission daemon listens on TCP port 587. STARTTLS is used to encrypt communications between email client and the submission daemon.</p> <h2 id="設定-postfix-tls-憑證與私鑰存放處"><a href="#設定-postfix-tls-憑證與私鑰存放處" class="header-anchor">#</a> 設定 postfix TLS 憑證與私鑰存放處</h2> <div class="language- extra-class"><pre><code>sudo nano /etc/postfix/main.cf
</code></pre></div><h2 id="安裝-dovecot"><a href="#安裝-dovecot" class="header-anchor">#</a> 安裝 Dovecot</h2> <p><strong>安裝軟體套件</strong></p> <div class="language- extra-class"><pre><code>sudo apt install dovecot-core dovecot-imapd
</code></pre></div><p><strong>驗證 Dovecot 已能正常運作</strong></p> <div class="language- extra-class"><pre><code>$ sudo dovecot --version
2.2.33.2 (d6601f4ec)
</code></pre></div><h2 id="設定-dovecot"><a href="#設定-dovecot" class="header-anchor">#</a> 設定 Dovecot</h2> <p><strong>啟用 IMAP</strong></p> <div class="language- extra-class"><pre><code>sudo nano /etc/dovecot/dovecot.conf


# Enable installed protocols
!include_try /usr/share/dovecot/protocols.d/*.protocol
#protocols = pop3 imap
</code></pre></div><p><strong>設定 Mailbox Location</strong></p> <div class="language- extra-class"><pre><code>$ sudo nano /etc/dovecot/conf.d/10-mail.conf


mail_location = maildir:~/Maildir
...
mail_privileged_group = mail
</code></pre></div><p><strong>令 dovecot 可讀每個 INBOX</strong></p> <div class="language- extra-class"><pre><code>sudo gpasswd -a dovecot mail
</code></pre></div><p><strong>設定 Authentication 機制</strong></p> <div class="language- extra-class"><pre><code>sudo nano /etc/dovecot/conf.d/10-auth.conf


disable_plaintext_auth = yes
auth_username_format = %Ln
auth_mechanisms = plain login
</code></pre></div><p><strong>設定 SSL/TLS 加密機制</strong></p> <div class="language- extra-class"><pre><code>sudo nano /etc/dovecot/conf.d/10-ssl.conf


ssl = required

# PEM encoded X.509 SSL/TLS certificate and private key. They're opened before
# dropping root privileges, so keep the key file unreadable by anyone but
# root. Included doc/mkcert.sh can be used to easily generate self-signed
# certificate, just make sure to update the domains in dovecot-openssl.cnf
#ssl_cert = &lt;/etc/dovecot/private/dovecot.pem
#ssl_key = &lt;/etc/dovecot/private/dovecot.key
ssl_cert = &lt;/etc/letsencrypt/live/mail.ccc99.tw/fullchain.pem
ssl_key = &lt;/etc/letsencrypt/live/mail.ccc99.tw/privkey.pem
</code></pre></div><p><strong>設定 SASL 身份驗證</strong></p> <div class="language- extra-class"><pre><code>sudo nano /etc/dovecot/conf.d/10-master.conf


service auth {
  # auth_socket_path points to this userdb socket by default. It's typically
  # used by dovecot-lda, doveadm, possibly imap process, etc. Users that have
  # full permissions to this socket are able to get a list of all usernames and
  # get the results of everyone's userdb lookups.
  #
  # The default 0666 mode allows anyone to connect to the socket, but the
  # userdb lookups will succeed only if the userdb returns an &quot;uid&quot; field that
  # matches the caller process's UID. Also if caller's uid or gid matches the
  # socket's uid or gid the lookup succeeds. Anything else causes a failure.
  #
  # To give the caller full permissions to lookup all users, set the mode to
  # something else than 0666 and Dovecot lets the kernel enforce the
  # permissions (e.g. 0777 allows everyone full permissions).
  unix_listener auth-userdb {
    #mode = 0666
    #user =
    #group =
  }

  # Postfix smtp-auth
  unix_listener /var/spool/postfix/private/auth {
    mode = 0666
    user = postfix
    group = postfix
  }

  # Auth process is run as this user.
  #user = $default_internal_user
}
</code></pre></div><p><strong>設定能自動建立 Send/Trash 資料夾</strong></p> <div class="language- extra-class"><pre><code>sudo nano /etc/dovecot/conf.d/15-mailboxes.conf


namespace inbox {
  # These mailboxes are widely used and could perhaps be created automatically:
  mailbox Drafts {
    auto = create
    special_use = \Drafts
  }
  mailbox Junk {
    auto = create
    special_use = \Junk
  }
  mailbox Trash {
    auto = create
    special_use = \Trash
  }

  # For \Sent mailboxes there are two widely used names. We'll mark both of
  # them as \Sent. User typically deletes one of them if duplicates are created.
  mailbox Sent {
    auto = create
    special_use = \Sent
  }
  mailbox &quot;Sent Messages&quot; {
    special_use = \Sent
  }

  # If you have a virtual &quot;All messages&quot; mailbox:
  #mailbox virtual/All {
  #  special_use = \All
  #  comment = All my messages
  #}

  # If you have a virtual &quot;Flagged&quot; mailbox:
  #mailbox virtual/Flagged {
  #  special_use = \Flagged
  #  comment = All my flagged messages
  #}
}
</code></pre></div><p><strong>重新啟動郵件伺服器</strong></p> <div class="language- extra-class"><pre><code>sudo systemctl restart dovecot
</code></pre></div><p>Dovecot will be listening on port 143 (IMAP) and 993 (IMAPS). If there’s a configuration error, dovecot will fail to restart. We also need to restart Postfix to allow the LOGIN authentication mechanism.</p> <div class="language- extra-class"><pre><code>sudo systemctl restart postfix
</code></pre></div><p>在 Thunderbird 的設定</p> <p><img src="https://www.linuxbabe.com/wp-content/uploads/2016/10/postfix-dovecot-letsencrypt.png" alt="postfix dovecot letsencrypt"></p> <h2 id="安裝與設定-lmtp"><a href="#安裝與設定-lmtp" class="header-anchor">#</a> 安裝與設定 lmtp</h2> <p><strong>確定 lmtp Service 已安裝</strong></p> <div class="language- extra-class"><pre><code>$ ll /usr/share/dovecot/protocols.d/
總計 20
drwxr-xr-x 2 root root 4096  5月  8 16:57 ./
drwxr-xr-x 5 root root 4096  5月  8 12:38 ../
-rw-r--r-- 1 root root   28  5月  8 12:39 imapd.protocol
-rw-r--r-- 1 root root   28  5月  8 16:57 lmtpd.protocol
-rw-r--r-- 1 root root   28  5月  8 13:01 pop3d.protocol
</code></pre></div><p><strong>設定 lmtp service</strong></p> <div class="language- extra-class"><pre><code>sudo nano /etc/dovecot/conf.d/10-master.conf


service lmtp {
  unix_listener /var/spool/postfix/private/dovecot-lmtp {
    mode = 0666
    group = postfix
    user = postfix
  }

  # Create inet listener only if you can't use the above UNIX socket
  #inet_listener lmtp {
    # Avoid making LMTP visible for the entire internet
    #address =
    #port =
  #}
}
</code></pre></div><p><strong>設定 postfix 應配合組態</strong></p> <div class="language- extra-class"><pre><code>sudo nano /etc/postfix/main.cf


mailbox_transport = lmtp:unix:private/dovecot-lmtp
smtputf8_enable = no
</code></pre></div><hr> <h1 id="異常排解"><a href="#異常排解" class="header-anchor">#</a> 異常排解</h1> <h2 id="重新啟動-postfix-設定工具"><a href="#重新啟動-postfix-設定工具" class="header-anchor">#</a> 重新啟動 Postfix 設定工具</h2> <div class="language- extra-class"><pre><code>sudo dpkg-reconfigure -plow postfix 


alanjui@SRV-01:~$ sudo dpkg-reconfigure -plow postfix
[sudo] password for alanjui: 
postconf: warning: /etc/postfix/main.cf, line 53: overriding earlier entry: myorigin=$mydomain
postconf: warning: /etc/postfix/main.cf, line 53: overriding earlier entry: myorigin=$mydomain
postconf: warning: /etc/postfix/main.cf, line 53: overriding earlier entry: myorigin=$mydomain
setting synchronous mail queue updates: false
setting myorigin
postconf: warning: /etc/postfix/main.cf: multiple entries for &quot;myorigin&quot;
setting destinations: mail.ccc99.tw ccc99.tw localhost.ccc99.tw localhost
setting relayhost: 
setting mynetworks: 192.168.66.0/24 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128
setting mailbox_size_limit: 0
setting recipient_delimiter: +
setting inet_interfaces: all
setting inet_protocols: all

Postfix (main.cf) is now set up with the changes above.  If you need to make 
changes, edit /etc/postfix/main.cf (and others) as needed.  To view Postfix 
configuration values, see postconf(1).

After modifying main.cf, be sure to run 'service postfix reload'.

Running newaliases
Processing triggers for libc-bin (2.27-3ubuntu1) ...
alanjui@SRV-01:~$ 
</code></pre></div><h2 id="觀察-service-log"><a href="#觀察-service-log" class="header-anchor">#</a> 觀察 Service Log</h2> <p>觀察由 Service 所產生的  Log 檔，其中所回報的異常、錯誤紀錄。</p> <div class="language- extra-class"><pre><code>sudo less /var/log/mail.log


journalctl
</code></pre></div><h2 id="檢查郵件服務"><a href="#檢查郵件服務" class="header-anchor">#</a> 檢查郵件服務</h2> <p><strong>了解 Postfix Service 執行狀態</strong></p> <div class="language- extra-class"><pre><code>sudo service postfix status


alanjui@SRV-01:~$ sudo systemctl status postfix
● postfix.service - Postfix Mail Transport Agent
   Loaded: loaded (/lib/systemd/system/postfix.service; enabled; vendor preset: enabled)
   Active: active (exited) since Fri 2019-03-22 16:50:48 CST; 26s ago
 Main PID: 12270 (code=exited, status=0/SUCCESS)
    Tasks: 0 (limit: 4915)
   CGroup: /system.slice/postfix.service

 3月 22 16:50:48 SRV-01 systemd[1]: Starting Postfix Mail Transport Agent...
 3月 22 16:50:48 SRV-01 systemd[1]: Started Postfix Mail Transport Agent.
</code></pre></div><p><strong>同 service 指令之另種用法 systemctl：</strong></p> <div class="language- extra-class"><pre><code>sudo systemctl status postfix
</code></pre></div><p><strong>重新啟動郵件服務</strong></p> <div class="language- extra-class"><pre><code>$ sudo service postfix restart
</code></pre></div><p><strong>在 Remote 端使用 telnet 測試郵件服務是否已能正常運作</strong></p> <div class="language- extra-class"><pre><code>$ telnet 192.168.66.10 25
Trying 192.168.66.10...
Connected to 192.168.66.10.
Escape character is '^]'.
220 mail.ccc99.tw ESMTP Postfix (Ubuntu)
ehlo service@ccc99.tw
250-mail.ccc99.tw
250-PIPELINING
250-SIZE 10240000
250-VRFY
250-ETRN
250-STARTTLS
250-ENHANCEDSTATUSCODES
250-8BITMIME
250-DSN
250 SMTPUTF8
mail from: &lt;service@ccc99.tw&gt;
250 2.1.0 Ok
rcpt to: &lt;alanjui.1960@gmail.com&gt;
250 2.1.5 Ok
data
354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;
From: &quot;Service&quot; &lt;service@ccc99.tw&gt;
To: &quot;Alan Jui&quot; &lt;alanjui.1960@gmail.com&gt;
Subject: Test message sent from manual telnet session

Hi Alan,

I send this mail from a localhost mail server.

Best grads,
Ju Zheng-Zhong
.
250 2.0.0 Ok: queued as 7B1FC400860
quit
221 2.0.0 Bye
Connection closed by foreign host.
</code></pre></div><h2 id="觀察-service-logs-用法"><a href="#觀察-service-logs-用法" class="header-anchor">#</a> 觀察 Service Logs 用法</h2> <p><strong>Log 檔案位置：</strong></p> <div class="language- extra-class"><pre><code>/var/log/mail.log
</code></pre></div><p><strong>瀏覽最新的 Log</strong></p> <div class="language- extra-class"><pre><code>sudo tail -f /var/log/mail.log | grep postfix
</code></pre></div><p>psostmap  :  <strong>warning: database /etc/aliases.db is older than source file /etc/aliases</strong></p> <div class="language- extra-class"><pre><code>sudo postmap /etc/aliases


sudo postalias /etc/aliases
</code></pre></div><p><strong>查看信箱是否有收到信</strong></p> <div class="language- extra-class"><pre><code>sudo tail -f /var/mail/juzhengzhong
</code></pre></div><p><strong>是否郵件仍在  Mail Queue 中</strong></p> <div class="language- extra-class"><pre><code>mailq
</code></pre></div><h2 id="certbot-renew-總是失敗"><a href="#certbot-renew-總是失敗" class="header-anchor">#</a> Certbot renew 總是失敗</h2> <p><strong>況狀：</strong></p> <div class="language- extra-class"><pre><code>Date: Fri, 17 May 2019 12:00:32 +0800 (CST)
From: Cron Daemon &lt;root@ccc99.tw&gt;
To: root@ccc99.tw
Subject: Cron &lt;root@SRV-01&gt; /opt/certbot-auto renew --quiet --no-self-upgrade --force-renewal

Attempting to renew cert (mail.ccc99.tw) from /etc/letsencrypt/renewal/mail.ccc99.tw.conf produced an unexpected error: The nginx plugin is not
+working; there may be problems with your existing configuration.
The error was: NoInstallationError(&quot;Could not find a usable 'nginx' binary. Ensure nginx exists, the binary is executable, and your PATH is set
+correctly.&quot;,). Skipping.
All renewal attempts failed. The following certs could not be renewed:
  /etc/letsencrypt/live/mail.ccc99.tw/fullchain.pem (failure)
1 renew failure(s), 0 parse failure(s)
</code></pre></div><p><strong>分析</strong></p> <p>如「錯誤訊息：NoInstallationError」之解釋，問題出在 certbot 無法得知 nginx 執行檔之所在路徑。</p> <p><strong>解法</strong></p> <ol><li><p>使用 root 帳號</p> <p>$ sudo su -</p></li> <li><p>查看 cron 設定</p> <p>$ sudo -i
$ sudo crontab -e</p> <p>$ sudo nano /etc/cron.d/certbot</p> <h1 id="etc-cron-d-certbot-crontab-entries-for-the-certbot-package"><a href="#etc-cron-d-certbot-crontab-entries-for-the-certbot-package" class="header-anchor">#</a> /etc/cron.d/certbot: crontab entries for the certbot package</h1> <h1 id="-2"><a href="#-2" class="header-anchor">#</a></h1> <h1 id="upstream-recommends-attempting-renewal-twice-a-day"><a href="#upstream-recommends-attempting-renewal-twice-a-day" class="header-anchor">#</a> Upstream recommends attempting renewal twice a day</h1> <h1 id="-3"><a href="#-3" class="header-anchor">#</a></h1> <h1 id="eventually-this-will-be-an-opportunity-to-validate-certificates"><a href="#eventually-this-will-be-an-opportunity-to-validate-certificates" class="header-anchor">#</a> Eventually, this will be an opportunity to validate certificates</h1> <h1 id="haven-t-been-revoked-etc-renewal-will-only-occur-if-expiration"><a href="#haven-t-been-revoked-etc-renewal-will-only-occur-if-expiration" class="header-anchor">#</a> haven't been revoked, etc.  Renewal will only occur if expiration</h1> <h1 id="is-within-30-days"><a href="#is-within-30-days" class="header-anchor">#</a> is within 30 days.</h1> <h1 id="-4"><a href="#-4" class="header-anchor">#</a></h1> <h1 id="important-note-this-cronjob-will-not-be-executed-if-you-are"><a href="#important-note-this-cronjob-will-not-be-executed-if-you-are" class="header-anchor">#</a> Important Note!  This cronjob will NOT be executed if you are</h1> <h1 id="running-systemd-as-your-init-system-if-you-are-running-systemd"><a href="#running-systemd-as-your-init-system-if-you-are-running-systemd" class="header-anchor">#</a> running systemd as your init system.  If you are running systemd,</h1> <h1 id="the-cronjob-timer-function-takes-precedence-over-this-cronjob-for"><a href="#the-cronjob-timer-function-takes-precedence-over-this-cronjob-for" class="header-anchor">#</a> the cronjob.timer function takes precedence over this cronjob.  For</h1> <h1 id="more-details-see-the-systemd-timer-manpage-or-use-systemctl-show"><a href="#more-details-see-the-systemd-timer-manpage-or-use-systemctl-show" class="header-anchor">#</a> more details, see the systemd.timer manpage, or use systemctl show</h1> <h1 id="certbot-timer"><a href="#certbot-timer" class="header-anchor">#</a> certbot.timer.</h1> <p>#SHELL=/bin/sh
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin</p> <p>0 */12 * * * root test -x /usr/bin/certbot -a ! -d /run/systemd/system &amp;&amp; perl -e 'sleep int(rand(43200))' &amp;&amp; certbot -q renew --nginx-ctl /usr/sbin/nginx --nginx-server-root /etc/nginx</p> <p>sudo systemctl list-timers</p></li></ol> <p>【參考】： https://community.letsencrypt.org/t/certbot-cron-job-nginx-plugin-noinstallationerror/67572/2</p> <hr> <h1 id="參考文件"><a href="#參考文件" class="header-anchor">#</a> 參考文件</h1> <p>https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-postfix-on-ubuntu-18-04#step-1-%E2%80%94-install-postfix</p> <p>https://www.linuxbabe.com/mail-server/secure-email-server-ubuntu-16-04-postfix-dovecot</p> <p>https://linoxide.com/mail/install-configure-postfix-ubuntu/</p> <p><a href="https://hostadvice.com/how-to/how-to-setup-postfix-as-send-only-mail-server-on-an-ubuntu-18-04-dedicated-server-or-vps/" target="_blank" rel="noopener noreferrer"><strong>How to Setup pOSTFIX S SEND-ONLY MAIL SERVER ON AN UBUNTU 18.04 DEDICATED SERVER OR VPS</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>How to use command line tool: mail to send email:</strong>
https://www.binarytides.com/linux-mail-command-examples/</p> <p><strong>Postfix Standard Configuration Examples</strong>
http://www.postfix.org/STANDARD_CONFIGURATION_README.html#null_client</p> <p><strong>“You have mail” - How to read mail in Ubuntu</strong>
https://devanswers.co/you-have-mail-how-to-read-mail-in-ubuntu/</p> <p><strong>Web Mail</strong></p> <p>https://modoboa.org/en/</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/Django4-Project-Template/assets/js/app.85744e83.js" defer></script><script src="/Django4-Project-Template/assets/js/2.c06a707d.js" defer></script><script src="/Django4-Project-Template/assets/js/104.ca8756b0.js" defer></script>
  </body>
</html>
